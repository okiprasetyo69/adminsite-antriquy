var konten_jadwal;var warna=["#16a085","#2980b9","#d35400","#c0392b","#27ae60","#8e44ad","#f39c12","#2c3e50"];$(document).ready(function(){var url_=base_url+'info/academic_cal_';$.ajax({url:strip_tags(url_),type:"POST",dataType:"json",success:function(msg){if(msg==''){$("#loading").html("<div class='alert alert-danger'>Academic schedule not available</div>");}else{konten_jadwal=msg;get_hari_start(konten_jadwal);$("#loading").fadeOut();}}});})
function pilih_tipe(tipe){$(".pilih-form").hide();$("#pilih_"+tipe).fadeIn();$("#pilih_"+tipe).select2();}function dateCheck(from,to,check){var fDate,lDate,cDate;fDate=Date.parse(from);lDate=Date.parse(to);cDate=Date.parse(check);if((cDate<=lDate&&cDate>=fDate)){return true;}return false;}function add_nol(str){if(str<10){var str_r="0"+str;}else{var str_r=str;}return str_r;}function get_hari_start(konten_jadwal){var hari_ini=$("#hari_ini").val();var jml_jam=$("#jml_jam").val();$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){if(hari==hari_ini){$.each(a,function(ruang,jadwal_detail){var i=0;var k=0;var walk=1;var str='<tr>';str+='<td colspan="2">'+ruang+'</td>';$.each(jadwal_detail,function(id,jadwal){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);k=k+(colspan);for(j=walk;j<parseInt(jadwal.urut);j++){str+='<td></td>';k=k+1;}if(jadwal.lang='IN'){strkelas="Kelas";}else{strkelas="Class";}if(jadwal.urut==j){str+=cetak_td(jadwal,colspan,strclass);}walk=parseInt(jadwal.urut)+parseInt(colspan);i+=parseInt(colspan-1);skip=true;});if(k<parseInt(jml_jam)){for(i=1;i<=parseInt(jml_jam-k);i++)str+='<td></td>';}str+='</tr>';$("#jadwal-wrap").append(str);});}});}function jadwal_hari(hari_data){var tmp=hari_data.split("|");var hari_ini=tmp[0];hari_ini=hari_ini.toLowerCase();var jml_jam=$("#jml_jam").val();$("#sub-header").html("<i class='fa fa-calendar'></i> "+tmp[1]);$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){if(hari==hari_ini){$.each(a,function(ruang,jadwal_detail){var i=0;var k=0;var walk=1;var str='<tr>';str+='<td colspan="2">'+ruang+'</td>';$.each(jadwal_detail,function(id,jadwal){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);k=k+(colspan);for(j=walk;j<parseInt(jadwal.urut);j++){str+='<td></td>';k=k+1;}if(jadwal.urut==j){str+=cetak_td(jadwal,colspan,strclass);}walk=parseInt(jadwal.urut)+parseInt(colspan);i+=parseInt(colspan-1);skip=true;});if(k<parseInt(jml_jam)){for(i=1;i<=parseInt(jml_jam-k);i++)str+='<td></td>';}str+='</tr>';$("#jadwal-wrap").append(str);});}});}function jadwal_ruang(ruang_data){var tmp=ruang_data.split("|");var ruang_ini=tmp[0];$("#sub-header").html("<i class='fa fa-building-o'></i> "+tmp[1]);var jml_jam=$("#jml_jam").val();$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){$.each(a,function(ruang,jadwal_detail){if(ruang==ruang_ini){var i=0;var k=0;var walk=1;var str='<tr>';str+='<td>'+hari+'</td>';str+='<td>'+ruang+'</td>';$.each(jadwal_detail,function(id,jadwal){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);k=k+(colspan);for(j=walk;j<parseInt(jadwal.urut);j++){str+='<td></td>';k=k+1;}if(jadwal.urut==j){str+=cetak_td(jadwal,colspan,strclass);}walk=parseInt(jadwal.urut)+parseInt(colspan);i+=parseInt(colspan-1);skip=true;});if(k<parseInt(jml_jam)){for(i=1;i<=parseInt(jml_jam-k);i++)str+='<td></td>';}str+='</tr>';$("#jadwal-wrap").append(str);}});});}function jadwal_dosen(dosen_data){var tmp=dosen_data.split("|");var dosen_ini=tmp[0];$("#sub-header").html("<i class='fa fa-user'></i> "+tmp[1]);$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){var count=0;$.each(a,function(ruang,jadwal_detail){var dosen_cocok=cari_jadwal_dosen(jadwal_detail,dosen_ini);if(dosen_cocok!=''){var str='<tr>';if(count==0)str+='<td hari="'+hari+'">'+hari+'</td>';str+='<td>'+ruang+'</td>';str+=dosen_cocok;str+='</tr>';$("#jadwal-wrap").append(str);count++;}});$("[hari='"+hari+"']").attr("rowspan",count);});}function cari_jadwal_dosen(jadwal_detail,dosen_ini){var walk=1;var str='';var ada=0;var jml_jam=$("#jml_jam").val();$.each(jadwal_detail,function(id,jadwal){for(i=walk;i<parseInt(jadwal.urut);i++){str+='<td></td>';}if(dosen_ini==jadwal.karyawan_id){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}ada=1;var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);str+=cetak_td(jadwal,colspan,strclass);walk=parseInt(jadwal.urut)+parseInt(colspan);}else{walk=parseInt(jadwal.urut);}});for(i=walk;i<=parseInt(jml_jam);i++)str+='<td></td>';if(ada==1)return str;else return'';}function jadwal_prodi(prodi_data){var tmp=prodi_data.split("|");var prodi_ini=tmp[0];$("#sub-header").html("<i class='fa fa-book'></i> "+tmp[1]);$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){var count=0;$.each(a,function(ruang,jadwal_detail){var prodi_cocok=cari_jadwal_prodi(jadwal_detail,prodi_ini);if(prodi_cocok!=''){var str='<tr>';if(count==0)str+='<td hari="'+hari+'">'+hari+'</td>';str+='<td>'+ruang+'</td>';str+=prodi_cocok;str+='</tr>';$("#jadwal-wrap").append(str);count++;}});$("[hari='"+hari+"']").attr("rowspan",count);});}function cari_jadwal_prodi(jadwal_detail,prodi_ini){var walk=1;var str='';var ada=0;var jml_jam=$("#jml_jam").val();$.each(jadwal_detail,function(id,jadwal){for(i=walk;i<parseInt(jadwal.urut);i++){str+='<td></td>';}if(prodi_ini==jadwal.prodi){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}ada=1;var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);str+=cetak_td(jadwal,colspan,strclass);walk=parseInt(jadwal.urut)+parseInt(colspan);}else{walk=parseInt(jadwal.urut);}});for(i=walk;i<=parseInt(jml_jam);i++)str+='<td></td>';if(ada==1)return str;else return'';}function jadwal_mk(mk_data){var tmp=mk_data.split("|");var mk_ini=tmp[0];$("#sub-header").html("<i class='fa fa-briefcase'></i> "+tmp[1]);$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){var count=0;$.each(a,function(ruang,jadwal_detail){var mk_cocok=cari_jadwal_mk(jadwal_detail,mk_ini);if(mk_cocok!=''){var str='<tr>';if(count==0)str+='<td hari="'+hari+'">'+hari+'</td>';str+='<td>'+ruang+'</td>';str+=mk_cocok;str+='</tr>';$("#jadwal-wrap").append(str);count++;}});$("[hari='"+hari+"']").attr("rowspan",count);});}function cari_jadwal_mk(jadwal_detail,mk_ini){var walk=1;var str='';var ada=0;var jml_jam=$("#jml_jam").val();$.each(jadwal_detail,function(id,jadwal){for(i=walk;i<parseInt(jadwal.urut);i++){str+='<td></td>';}if(mk_ini==jadwal.mk_id){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}ada=1;var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);str+=cetak_td(jadwal,colspan,strclass);walk=parseInt(jadwal.urut)+parseInt(colspan);}else{walk=parseInt(jadwal.urut);}});for(i=walk;i<=parseInt(jml_jam);i++)str+='<td></td>';if(ada==1)return str;else return'';}function jadwal_praktikum(praktikum_data){var tmp=praktikum_data.split("|");var praktikum_ini=tmp[0];$("#sub-header").html("<i class='fa fa-briefcase'></i> "+tmp[1]);$("#jadwal-wrap").html('');$.each(konten_jadwal,function(hari,a){var count=0;$.each(a,function(ruang,jadwal_detail){var mk_cocok=cari_jadwal_praktikum(jadwal_detail,praktikum_ini);if(mk_cocok!=''){var str='<tr>';if(count==0)str+='<td hari="'+hari+'">'+hari+'</td>';str+='<td>'+ruang+'</td>';str+=mk_cocok;str+='</tr>';$("#jadwal-wrap").append(str);count++;}});$("[hari='"+hari+"']").attr("rowspan",count);});}function cari_jadwal_praktikum(jadwal_detail,mk_ini){var walk=1;var str='';var ada=0;var jml_jam=$("#jml_jam").val();$.each(jadwal_detail,function(id,jadwal){for(i=walk;i<parseInt(jadwal.urut);i++){str+='<td></td>';}if(mk_ini==jadwal.mk_id&&jadwal.praktikum=='1'){switch(jadwal.prodi){case'SISKOM':strclass='label-success';break;case'TEKKOM':strclass='label-success';break;case'TKOM':strclass='label-success';break;case'MILKOM':strclass='label-milkom';break;case'TIF':strclass='label-info';break;case'ILKOM':strclass='label-info';break;case'SI':strclass='label-warning';break;case'PTI':strclass='label-pti';break;case'2015010001':strclass='label-pti';break;case'2016040001':strclass='label-ti';break;case'TI':strclass='label-ti';break;default:strclass='label-danger';}ada=1;var colspan=set_colspan(jadwal.urut,jadwal.urut_selesai);str+=cetak_td(jadwal,colspan,strclass);walk=parseInt(jadwal.urut)+parseInt(colspan);}else{walk=parseInt(jadwal.urut);}});for(i=walk;i<=parseInt(jml_jam);i++)str+='<td></td>';if(ada==1)return str;else return'';}function set_colspan(urut,jam_selesai){return(parseInt(jam_selesai)-parseInt(urut));}function cetak_td(jadwal,colspan,strclass){var str='';var isi='<strong>'+jadwal.matakuliah+'</strong><br>'+jadwal.dosen+'<br> '+jadwal.str_kelas;if(jadwal.praktikum=="1")isi+='<br><code>praktikum</code>';if(jadwal.repeat_on=="daily"){var now=new Date();var tomorrow=new Date();tomorrow.setDate(tomorrow.getDate()+1);var date_now=new Date(jadwal.tgl_mulai);var tgl_curr=jadwal.tgl_mulai;var tgl_now=now.getFullYear()+'-'+add_nol(now.getMonth()+1)+'-'+add_nol(now.getDate());var tgl_tomorrow=tomorrow.getFullYear()+'-'+add_nol(tomorrow.getMonth()+1)+'-'+add_nol(tomorrow.getDate());isi+='<br><span class="label label-danger">'+jadwal.tgl_mulai+'</span>';var fDate,lDate,cDate;fDate=Date.parse(tgl_now);lDate=Date.parse(tgl_curr);cDate=Date.parse(tgl_curr);if((cDate<=lDate&&cDate>=fDate)){str+='<td class='+strclass+' style="text-align: center; color: white" colspan="'+colspan+'">'+isi+'</td>';}else{for(var i=0;i<colspan;i++)str+='<td></td>';}}else{str+='<td class='+strclass+' style="text-align: center; color: white" colspan="'+colspan+'">'+isi+'</td>';}return str;}